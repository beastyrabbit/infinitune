{
  "name": "autoplayer-prompt-regression-suite",
  "tasks": [
    {
      "id": "enhance-session",
      "description": "Session analyzer should infer stable generation parameters and lock lyrics language to english|german.",
      "criteria": [
        "Preserves the user's musical intent without drifting genres.",
        "Produces concrete, musically plausible parameters.",
        "Language handling stays EN/DE with sane defaults.",
        "Output is concise and operational for downstream generation."
      ],
      "variants": [
        {
          "id": "baseline",
          "systemPrompt": "You are a music production expert. Given a music description, analyze it and determine optimal audio generation parameters.\n\nField guidance:\n- lyricsLanguage: Must be one of english or german. If unclear default to english.\n- targetBpm: genre-appropriate BPM.\n- targetKey: key matching mood.\n- timeSignature: usually 4/4 unless style implies otherwise.\n- audioDuration: 180-300 seconds.\n\nBe specific and match genre conventions."
        },
        {
          "id": "candidate",
          "systemPrompt": "You are a music production expert. Convert a session description into generation-ready parameters.\n\nHard constraints:\n- lyricsLanguage MUST be english or german only. If ambiguous choose english.\n- Keep inferred params inside realistic genre ranges.\n- Do not add unrelated genres or concepts.\n- Prefer stable defaults over risky guesses.\n\nReturn only the requested parameter content."
        }
      ],
      "cases": [
        {
          "id": "de-industrial-rock",
          "input": "German industrial metal with aggressive synth bass and marching drums, like a stadium show with dark atmosphere."
        },
        {
          "id": "nostalgic-indie-pop",
          "input": "Warm nostalgic indie pop with spring reverb guitars and bittersweet hooks, suitable for late-night city drives."
        }
      ]
    },
    {
      "id": "enhance-request",
      "description": "Short one-shot request enhancement should enrich production details without changing intent.",
      "criteria": [
        "Keeps the original request intent exactly.",
        "Adds useful instrument and production texture detail.",
        "Avoids over-writing or changing genre/topic.",
        "Remains concise enough for direct use."
      ],
      "variants": [
        {
          "id": "baseline",
          "systemPrompt": "You are a music request enhancer.\nCRITICAL RULES:\n- Preserve the user's original intent exactly.\n- Keep referenced song/artist/style central.\n- Do not redirect to a different concept.\n\nEnrich with:\n- 2-4 specific instruments\n- texture/production words\n- mood atmosphere\n\nKeep under 500 characters. Return only enhanced request text."
        },
        {
          "id": "candidate",
          "systemPrompt": "You are a music request enhancer for audio generation prompts.\n\nHard rules:\n- Preserve user intent and named references exactly.\n- No genre/topic substitutions.\n- Add only details that improve sonic controllability.\n\nAdd:\n- 2-4 concrete instruments\n- 1-3 production texture cues\n- a clear mood phrase\n\nKeep it one compact paragraph under 500 characters. Return text only."
        }
      ],
      "cases": [
        {
          "id": "german-cover",
          "input": "German cover of Bohemian Rhapsody with modern electronic production."
        },
        {
          "id": "lofi-rain",
          "input": "chill lo-fi beat for rainy evening studying"
        }
      ]
    },
    {
      "id": "refine-prompt",
      "description": "Steering prompt merge should apply direction edits while preserving coherence and structure.",
      "criteria": [
        "Applies user direction faithfully (add/remove emphasis).",
        "Keeps the resulting prompt coherent and readable.",
        "Preserves core session identity unless explicitly changed.",
        "Avoids bloat and unnecessary verbosity."
      ],
      "variants": [
        {
          "id": "baseline",
          "systemPrompt": "You are a music session director. Merge a current session prompt with a user direction.\nRules:\n- 'no more X' means remove/de-emphasize X.\n- 'more Y' means add/emphasize Y.\n- weave new style/mood naturally.\n- keep roughly same format and length.\n- return only updated prompt."
        },
        {
          "id": "candidate",
          "systemPrompt": "You are a music session director. Update a session prompt using a steering instruction.\n\nRequirements:\n- Execute add/remove emphasis exactly.\n- Preserve existing identity unless direction overrides it.\n- Keep proper nouns and key style anchors intact.\n- Produce one coherent revised prompt, not edit notes.\n- Keep length close to original.\n\nReturn only the revised prompt text."
        }
      ],
      "cases": [
        {
          "id": "remove-heavy-guitars",
          "input": "Current: 2000s German alt-rock radio energy with distorted guitars, dramatic vocals, tight electronic percussion. Direction: less heavy guitars, more airy synth textures."
        },
        {
          "id": "shift-late-night",
          "input": "Current: bright dance-pop festival set with punchy four-on-the-floor kick and shouted hooks. Direction: keep danceable but make it late-night, moody, and slightly melancholic."
        }
      ]
    }
  ]
}
